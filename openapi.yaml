openapi: 3.0.3
info:
  title: API Documentation
  version: 1.0.0
paths:

  /product/v1:
    get:
      summary: Get Product List API
      parameters:
        - in: header
          name: application-id
          schema:
            type: string
          required: true
          description: Client Application ID
        - in: header
          name: api-key
          schema:
            type: string
          required: true
          description: Client API Key
        - in: query
          name: product_id
          schema:
            type: string
          required: false
          description: Optional product ID filter, e.g. DT0011TSDP15
      responses:
        '200':
          description: Product List
          content:
            application/json:
              example:
                products:
                  - indico_product_id: alteragameTopUp292
                    description: Game voucher TopUp 292
                    price: 150000
                    group: ""
                    category: ""
                    subcat: ""
                    code: ""
                    details:
                      - description: Game TopUp
                        type: ID
                        field: [user_id, server_id, server_name]
                        index: 0
                    promo:
                      type: fixed
                      amount: 10000
                    server_list: []
                  - indico_product_id: BB0011BPJS01
                    description: BPJS Kesehatan
                    price: 1
                    group: BILLS
                    category: BPJS
                    subcat: BPJS Kesehatan
                    code: BPJS
                    details:
                      - description: BPJS Kesehatan
                        type: ID
                        field: [account_id, month]
                        index: 0
                    promo:
                      type: fixed
                      amount: 0
                    server_list: []

  /inquiry/v1:
    post:
      summary: Create Order Inquiry API
      parameters:
        - in: header
          name: application-id
          schema:
            type: string
          required: true
          description: Client Application ID
        - in: header
          name: api-key
          schema:
            type: string
          required: true
          description: Client API Key
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - indico_product_id
                - callback_url
                - data
              properties:
                indico_product_id:
                  type: string
                callback_url:
                  type: string
                  format: uri
                data:
                  type: array
                  items:
                    type: object
                    required: [order_count]
                    properties:
                      order_count:
                        type: integer
                      details:
                        type: object
                        properties:
                          user_id:
                            type: string
                          zone_id:
                            type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              example:
                status_code: INDOK1
                status_desc: Inquiry Successfully Created
                status: Success
                order_id: 17072520MLBB038424
                indico_product_id: DG0011MLBB31
                order_details:
                  - order_count: 1
                    details:
                      - description: MOBILE LEGEND 10 DIAMOND (ID)
                        status: Success
                        status_desc: Successfully Inquiry
                        user_name: Coda test account
                        user_id: "1029384"
                        zone_id: "111"
                timestamp: 2025-07-17T20:40:00.63261936+07:00
        '202':
          description: Invalid User (processed by channel)
          content:
            application/json:
              example:
                status_code: INDF102
                status_desc: Invalid User
                status: Failed
                order_id: 17072520PUMO122555
                indico_product_id: VG0011PUMO01
                order_details:
                  - order_count: 1
                    details:
                      - description: MOBILE LEGEND 10 DIAMOND
                        status: Failed
                        status_desc: Invalid User
                        user_id: "1029383"
                        zone_id: "111"
                timestamp: 2025-07-17T20:41:55.751787362+07:00
        '400':
          description: Invalid Request Body
          content:
            application/json:
              example:
                status_code: IND001
                status_desc: Invalid Request Body
                status: Cancelled
                timestamp: 0001-01-01T00:00:00Z

  /mo/request:
    get:
      summary: Get MO Request API (No headers required)
      parameters:
        - in: query
          name: msisdn
          schema:
            type: string
          required: true
          description: User phone number, e.g. 08979898989
        - in: query
          name: sms
          schema:
            type: string
          required: true
          description: SMS content, e.g. UMBTESTVOUCHER
        - in: query
          name: adn
          schema:
            type: string
          required: true
          description: ADN code, e.g. 3230
        - in: query
          name: http_segment_number
          schema:
            type: integer
          required: true
          description: Segment number, e.g. 1
        - in: query
          name: http_segment_count
          schema:
            type: integer
          required: true
          description: Total segment count, e.g. 2
        - in: query
          name: trx_id
          schema:
            type: string
          required: true
          description: Transaction ID, e.g. 251130142638010030
      responses:
        '200':
          description: MO Request Success
          content:
            text/plain:
              schema:
                type: string
                example: ok
        '400':
          description: Invalid Parameters
          content:
            text/plain:
              schema:
                type: string
                example: invalid params

  /v3/api/payment/invoice:
    post:
      summary: Create Payment Invoice API
      parameters:
        - in: header
          name: application-id
          schema:
            type: string
          required: true
          description: Client Application ID
        - in: header
          name: api-key
          schema:
            type: string
          required: true
          description: Client API Key
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - amount
                - payment_method
              properties:
                amount:
                  type: number
                  example: 100000
                payment_method:
                  type: string
                  description: |
                    Payment method type. Possible values:
                    - va: Virtual Account (e.g. BCA, BIR, Mandira, BSI)
                    - ewallet: E-wallet (e.g. OVO, DANA, Guppy)
                    - qris: QRIS payment method
                  enum:
                    - va
                    - ewallet
                    - qris
                  example: BCA
                msisdn:
                  type: string
                  description: Optional, customer phone number
                invoice_duration:
                  type: integer
                  description: Optional, invoice validity duration in minutes
                description:
                  type: string
                  description: Optional, payment description
                success_redirect_url:
                  type: string
                  format: uri
                  description: Optional, redirect URL on success
                failure_redirect_url:
                  type: string
                  format: uri
                  description: Optional, redirect URL on failure
      responses:
        '200':
          description: Invoice Created Successfully
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/VAResponse'
                  - $ref: '#/components/schemas/EwalletResponse'
                  - $ref: '#/components/schemas/QRISResponse'
              examples:
                VA:
                  summary: Virtual Account Response
                  value:
                    order_id: "stage-krby5rym"
                    status: "SUCCESS"
                    expired_at: "2025-07-17T13:49:31.529Z"
                    payment_id: "3b8c74a9-93f9-44ba-80c1-ae1aa7f57512"
                    payment_detail:
                      virtual_account: "132819999563447"
                Ewallet:
                  summary: Ewallet Response
                  value:
                    order_id: "stage-iwf69nwp"
                    invoice_url: "https://app.uat.shopeepay.co.id/u/pay_checkout?"
                    status: "SUCCESS"
                    expired_at: "2025-07-18T20:45:50+07:00"
                    payment_id: "stage-iwf69nwp"
                    payment_detail:
                      desktop_web_checkout_url: "https://app.uat.shopeepay.co.id/u/pay_checkout"
                QRIS:
                  summary: QRIS Response
                  value:
                    order_id: "stage-qsule8c1"
                    status: "SUCCESS"
                    qr_code: "/u7eRoySpZIZVJGQDjI9BX1nXzhrPjXwSPhfG+j3UEPjj7JbF72CzkiuzPlPPY3GwEsR5m5t3zZPJzz0/w7"
                    expired_at: "2025-07-18T20:46:47+07:00"
                    payment_id: "stage-qsule8c1"
                    payment_detail:
                      qr_checkout_string: "https://devo.finpay.id/pg/payment/card/v2/access/91f55d9fdb61defc69edb7f45bb203d06f47bc1c92f84a0057c36da959d700b0"
        '400':
          description: Bad Request
          content:
            application/json:
              examples:
                amountMismatch:
                  value:
                    error_message: Error Amount not match
                    expired_at: 0001-01-01T00:00:00Z
                vaRequestError:
                  value:
                    status: Error sending VA request
                    expired_at: 0001-01-01T00:00:00Z

  /v3/api/payment/methods:
    get:
      summary: Get Payment Method API
      parameters:
        - in: header
          name: application-id
          schema:
            type: string
          required: true
          description: Client Application ID
        - in: header
          name: api-key
          schema:
            type: string
          required: true
          description: Client API Key
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          required: false
          description: Page number for pagination
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          required: false
          description: Limit number of records per page
      responses:
        '200':
          description: Payment Method List
          content:
            application/json:
              example:
                data:
                  - payment_method_name: BJB
                    payment_channel: VA
                    payment_description: BJB VA
                    fee_type: fixed_fee
                    fixed_fee: 3500
                    percentage_fee: 0
                  - payment_method_name: DANA
                    payment_channel: e-wallet
                    payment_description: DANA
                    fee_type: percentage_fee
                    fixed_fee: 0
                    percentage_fee: 2.73
                  - payment_method_name: DANA
                    payment_channel: e-wallet
                    payment_description: DANA
                    fee_type: percentage_fee
                    fixed_fee: 0
                    percentage_fee: 1.5
                service_rate: 1000
                pagination:
                  page: 1
                  limit: 10
                  total_count: 10
                  total_page: 2

components:
  schemas:
    VAResponse:
      type: object
      properties:
        order_id:
          type: string
          example: stage-krby5rym
        status:
          type: string
          example: SUCCESS
        expired_at:
          type: string
          format: date-time
          example: "2025-07-17T13:49:31.529Z"
        payment_id:
          type: string
          example: 3b8c74a9-93f9-44ba-80c1-ae1aa7f57512
        payment_detail:
          type: object
          properties:
            virtual_account:
              type: string
              example: "132819999563447"

    EwalletResponse:
      type: object
      properties:
        order_id:
          type: string
          example: stage-iwf69nwp
        invoice_url:
          type: string
          format: uri
          example: "https://app.uat.shopeepay.co.id/u/pay_checkout?"
        status:
          type: string
          example: SUCCESS
        expired_at:
          type: string
          format: date-time
          example: "2025-07-18T20:45:50+07:00"
        payment_id:
          type: string
          example: stage-iwf69nwp
        payment_detail:
          type: object
          properties:
            desktop_web_checkout_url:
              type: string
              format: uri
              example: "https://app.uat.shopeepay.co.id/u/pay_checkout"

    QRISResponse:
      type: object
      properties:
        order_id:
          type: string
          example: stage-qsule8c1
        status:
          type: string
          example: SUCCESS
        qr_code:
          type: string
          example: "/u7eRoySpZIZVJGQDjI9BX1nXzhrPjXwSPhfG+j3UEPjj7JbF72CzkiuzPlPPY3GwEsR5m5t3zZPJzz0/w7"
        expired_at:
          type: string
          format: date-time
          example: "2025-07-18T20:46:47+07:00"
        payment_id:
          type: string
          example: stage-qsule8c1
        payment_detail:
          type: object
          properties:
            qr_checkout_string:
              type: string
              format: uri
              example: "https://devo.finpay.id/pg/payment/card/v2/access/91f55d9fdb61defc69edb7f45bb203d06f47bc1c92f84a0057c36da959d700b0"
